<p>Some great instructions on how to use this component.</p>
<p>Once you've finished building your form, use your browser's <code>web inspector</code> to copy the whole <code>&lt;form&gt;</code> element (outlined with a dashed gray border).</p>

<div class="input-group showOutlines" style="align-items:baseline">
	<select class="custom-select" id="formSelect">
		<option>Some pre-built form</option>
	</select>

	<label class="form-check-label"><input class="form-check-input" type="checkbox" id="showOutlines" checked /> Show Form Group Outlines</label>

	<p style="flex-grow:1;text-align:right;"><button class="btn btn-sm" id="getFormBuilderHTML">Get HTML</button></p>
</div>
<form></form>

<div class="input-group" id="form-builder-controls">
	<button class="btn btn-sm btn-secondary" id="addGroup">Add Form Group</button>
	<select class="custom-select" id="inputSelect"><!-- input elements --></select>
	<button class="btn btn-sm btn-primary" id="addElement">Add Element</button>
</div>

<aside>
	<h3>Form Element Reference</h3>
	<div class="form-builder-element" data-name="label">
		{{> forms.label}}
	</div>
	<div class="form-builder-element" data-name="checkbox">
		{{> forms.checkbox}}
	</div>
	<div class="form-builder-element" data-name="radio">
		{{> forms.radio}}
	</div>
	<div class="form-builder-element" data-name="select">
		{{> forms.select}}
	</div>
	<div class="form-builder-element" data-name="text-input">
		{{> forms.text-input}}
	</div>
	<div class="form-builder-element" data-name="input-button-group">
		{{> forms.input-button-group}}
	</div>
	<div class="form-builder-element" data-name="text-area">
		{{> forms.text-area}}
	</div>
	<div class="form-builder-element" data-name="button">
		{{> buttons.button}}
	</div>
	<div class="form-builder-element" data-name="help-text">
		{{> forms.help-text}}
	</div>
</aside>

<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
	var form = $('#form-builder form'),
		selectBox = $('#inputSelect'),
		formElements = $('.form-builder-element'),
		group;

	formElements.each(function(i, element){
		selectBox.append($('<option value='+i+' />').text($(element).data('name')));

		if ($(element).find('sample').length > 0){
			$(element).find('sample').each(function(i, sampleBlock){
				// move the <sample> content outside the <sample> block and trim whitespace
				sampleBlock.after(String.prototype.trim.call(sampleBlock.innerHTML));
				// remove the <sample> block
				$(sampleBlock).remove();
			});
		}
	});
	$('#showOutlines').on('click',function(){
		if (this.checked) {
			$(this).parents('.input-group').addClass('showOutlines');
		} else {
			$(this).parents('.input-group').removeClass('showOutlines');
		}
	});
	$('#addGroup').on('click', function(){
		var lastGroup = form.find('.form-group:last-of-type');
		$('#addGroup').attr('disabled','disabled');
		if (lastGroup.length === 1 && lastGroup.children().length === 0) { return; }
		form.append($('<div class="form-group" />'));
	});
	$('#addElement').on('click', function(){
		group = form.find('.form-group:last-of-type');
		if (group.length === 0) {
			form.append($('<div class="form-group" />'));
			group = form.find('.form-group:last-of-type');
		}
		group.append($($(formElements[selectBox[0].value]).children()).clone());
		$('#addGroup').removeAttr('disabled');
	});

	// get html
	$('#getFormBuilderHTML').on('click',function(){
		var form = $('#form-builder form'),
			modal = $('<pre class="language-markup"/>').append($('<code class="language-markup"/>').text(form.html()));
			if (form.next()[0].tagName === "PRE") {
				form.next().remove();
			}
			form.after(modal);
			Prism.highlightElement(modal[0]);
	});

	// remove unnecessary content
	$('.f-item-code, .componentClasses').remove();
	if (window.location.hash) {hideOtherBlocks();}
	window.onhashchange = hideOtherBlocks;
});

function hideOtherBlocks () {
	$('.f-item-group:not(' + window.location.hash + ')').addClass('f-item-hidden');
	$(window.location.hash).removeClass('f-item-hidden');
}
</script>